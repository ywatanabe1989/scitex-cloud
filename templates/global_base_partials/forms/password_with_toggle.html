{% comment %} Reusable password field with visibility toggle (eye button) Usage:
{% include 'partials/forms/password_with_toggle.html' with id='password'
name='password' label='Password' placeholder='Enter password' required=True
help_text='Minimum 8 characters' %} {% endcomment %}
<div class="form-group mb-3">
    {% if label %}
        <label for="{{ id }}" class="form-label">
            {{ label }}
            {% if required %}
                <span class="text-danger">*</span>
            {% endif
            %}
        </label>
    {% endif %}
    <div class="input-group">
        <input
            type="password"
            class="form-control"
            id="{{ id }}"
            name="{{ name }}"
            placeholder="{{ placeholder|default:'Enter password' }}"
{% if required %}required{% endif %}
{% if minlength %}minlength="{{ minlength }}" {% else %}minlength="8" {% endif %}
            />
            <button class="btn btn-outline-secondary"
                    type="button"
                    id="toggle{{ id|title }}">
                <i class="fas fa-eye" id="toggle{{ id|title }}Icon"></i>
            </button>
        </div>
        {% if help_text %}<small class="form-text text-muted">{{ help_text }}</small>{% endif %}
    </div>
    <script>
  // Password visibility toggle for {{ id }}
  document.addEventListener('DOMContentLoaded', function() {
      const toggle{{ id|title }} = document.getElementById('toggle{{ id|title }}');
      const {{ id }}Input = document.getElementById('{{ id }}');
      const toggle{{ id|title }}Icon = document.getElementById('toggle{{ id|title }}Icon');

      if (toggle{{ id|title }} && {{ id }}Input && toggle{{ id|title }}Icon) {
          toggle{{ id|title }}.addEventListener('click', function() {
              const type = {{ id }}Input.getAttribute('type') === 'password' ? 'text' : 'password';
              {{ id }}Input.setAttribute('type', type);

              if (type === 'password') {
                  toggle{{ id|title }}Icon.classList.remove('fa-eye-slash');
                  toggle{{ id|title }}Icon.classList.add('fa-eye');
              } else {
                  toggle{{ id|title }}Icon.classList.remove('fa-eye');
                  toggle{{ id|title }}Icon.classList.add('fa-eye-slash');
              }
          });
      }
  });
    </script>
