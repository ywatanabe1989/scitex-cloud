{% extends "global_base.html" %}
{% load static %}
{% block title %}SciTeX Exploration{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'social_app/css/explore-inline.css' %}">
{% endblock %}

{% block content %}
    <div class="container explore-container">
        <div class="explore-header">
            <h1>Explore SciTeX</h1>
            <p>Discover trending repositories and active researchers</p>
        </div>
        <!-- Tabs -->
        <nav class="explore-tabs">
            <a href="?tab=repositories"
               class="tab-link {% if tab == 'repositories' %}active{% endif %}">ğŸ“š Repositories</a>
            <a href="?tab=users"
               class="tab-link {% if tab == 'users' %}active{% endif %}">ğŸ‘¥ Users</a>
        </nav>
        <!-- Repositories Tab -->
        {% if tab == 'repositories' %}
            <div class="repositories-grid">
                {% if repositories %}
                    {% for repo in repositories %}
                        <article class="repository-card">
                            <div class="repository-card-header">
                                <div class="repository-card-title-wrapper">
                                    <h3 class="repository-card-title">
                                        <a href="{{ repo.get_absolute_url }}"
                                           class="repository-card-link">{{ repo.owner.username }}/{{ repo.name }}</a>
                                    </h3>
                                </div>
                                <div class="repository-card-stats">
                                    <span class="repository-card-star-count">â­ {{ repo.star_count }}</span>
                                </div>
                            </div>
                            {% if repo.description %}
                                <p class="repository-card-description">{{ repo.description }}</p>
                            {% endif %}
                            <div class="repository-card-meta">
                                <span>
                                    {% if repo.visibility == 'public' %}
                                        ğŸŒ Public
                                    {% else %}
                                        ğŸ”’ Private
                                    {% endif %}
                                </span>
                                <span>ğŸ Python</span>
                                <span>Updated {{ repo.updated_at|timesince }} ago</span>
                            </div>
                        </article>
                    {% endfor %}
                {% else %}
                    <div class="empty-state">
                        <p class="empty-state-title">No public repositories yet</p>
                        <p>Be the first to create a public research project!</p>
                    </div>
                {% endif %}
            </div>
        {% endif %}
        <!-- Users Tab -->
        {% if tab == 'users' %}
            <div class="users-grid">
                {% if users %}
                    {% for user in users %}
                        <article class="user-card">
                            <div class="user-card-header">
                                <div class="user-card-avatar">{{ user.username|slice:":1"|upper }}</div>
                                <div class="user-card-info">
                                    <h3 class="user-card-name">
                                        <a href="/{{ user.username }}/"
                                           class="user-card-link">
                                            {{ user.get_full_name|default:user.username }}
                                        </a>
                                    </h3>
                                    <p class="user-card-username">@{{ user.username }}</p>
                                </div>
                            </div>
                            {% if user.profile.bio %}
                                <p class="user-card-bio">{{ user.profile.bio|truncatewords:20 }}</p>
                            {% endif %}
                            <div class="user-card-meta">
                                <span>
                                    {% if user.profile.profile_visibility == 'public' %}
                                        ğŸŒ Public
                                    {% elif user.profile.profile_visibility == 'restricted' %}
                                        ğŸš« Restricted
                                    {% else %}
                                        ğŸ”’ Private
                                    {% endif %}
                                </span>
                                <span>ğŸ“š {{ user.repo_count }} repos</span>
                                <span>ğŸ‘¥ {{ user.follower_count }} followers</span>
                            </div>
                        </article>
                    {% endfor %}
                {% else %}
                    <div class="empty-state-grid">
                        <p class="empty-state-title">No users to display</p>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </div>
{% endblock %}
