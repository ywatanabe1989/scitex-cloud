<!-- GitHub-style File Header (two-row structure) -->
<div class="file-header-enhanced">
    <!-- Row 1: Commit info -->
    {% if git_info %}
    <div class="file-header-commit-info">
        <div class="commit-info-left">
            {% if git_info.author_name %}
            <div class="commit-avatar" title="{{ git_info.author_name }}">
                {{ git_info.author_name|slice:":1"|upper }}
            </div>
            <a href="/{{ project.owner.username }}/{{ project.slug }}/commits/{{ git_info.full_hash }}"
               class="commit-author" title="{{ git_info.author_email }}">
                {{ git_info.author_name }}
            </a>
            <a href="/{{ project.owner.username }}/{{ project.slug }}/commit/{{ git_info.full_hash }}"
               class="commit-message" title="{{ git_info.message }}">
                {{ git_info.message }}
            </a>
            {% else %}
            <span class="no-commits-text">No commits yet</span>
            {% endif %}
        </div>
        <div class="commit-info-right">
            {% if git_info.short_hash %}
            <a href="/{{ project.owner.username }}/{{ project.slug }}/commit/{{ git_info.full_hash }}"
               class="commit-hash" title="{{ git_info.full_hash }}">
                {{ git_info.short_hash }}
            </a>
            {% endif %}
            {% if git_info.time_ago %}
            <span class="commit-time">{{ git_info.time_ago }}</span>
            {% endif %}
            <a href="/{{ project.owner.username }}/{{ project.slug }}/commits/{{ git_info.current_branch }}/{{ file_path }}"
               class="history-button" title="View file history">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path fill-rule="evenodd" d="M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z"></path>
                </svg>
                History
            </a>
        </div>
    </div>
    {% endif %}

    <!-- Row 2: File actions -->
    <div class="file-header-actions">
        <div class="file-actions-left">
            <!-- Code/Blame tabs -->
            <div class="file-view-tabs">
                <button type="button" class="file-tab active">Code</button>
                {% if render_type == 'code' or render_type == 'text' %}
                <button type="button" class="file-tab" onclick="alert('Blame view coming soon!'); return false;">Blame</button>
                {% endif %}
            </div>
            <!-- File info -->
            <span class="file-info-text">{{ file_name }} â€¢ {{ file_size|filesizeformat }}</span>
            {% if render_type == 'markdown' %}
            <div class="btn-group btn-group-sm" role="group" style="margin-left: 12px;">
                <button type="button" class="btn btn-sm btn-outline-primary active" id="previewBtn" onclick="showPreview()">Preview</button>
                <button type="button" class="btn btn-sm btn-outline-secondary" id="codeBtn" onclick="showCode()">Code</button>
            </div>
            {% endif %}
        </div>

        <div class="file-actions-right">
            <a href="/{{ project.owner.username }}/{{ project.slug }}/blob/{{ file_path }}?mode=raw" class="btn btn-sm btn-outline-secondary" target="_blank">Raw</a>
            <button onclick="copyToClipboard()" class="btn btn-sm btn-icon" title="Copy">
                <i class="fas fa-copy"></i>
            </button>
            <a href="/{{ project.owner.username }}/{{ project.slug }}/blob/{{ file_path }}?mode=download" class="btn btn-sm btn-icon" title="Download">
                <i class="fas fa-download"></i>
            </a>
            {% if can_edit %}
            <a href="/{{ project.owner.username }}/{{ project.slug }}/blob/{{ file_path }}?mode=edit" class="btn btn-sm btn-icon" title="Edit">
                <i class="fas fa-edit"></i>
            </a>
            {% endif %}
        </div>
    </div>
</div>
