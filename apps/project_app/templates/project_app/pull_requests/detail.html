{% extends "global_base.html" %}
{% load static %}
{% block title %}
    PR #{{ pr.number }}: {{ pr.title }} - {{ project.name }}
{% endblock %}
{% block extra_css %}
    <link rel="stylesheet"
          href="{% static 'project_app/css/project_app.css' %}" />
    <link rel="stylesheet" href="{% static 'project_app/css/pull_requests/detail.css' %}" />
{% endblock %}
{% block content %}
    <div class="container-fluid mt-4"
         data-pr-close-url="{% url 'user_projects:pr_close' project.owner.username project.slug pr.number %}"
         data-pr-reopen-url="{% url 'user_projects:pr_reopen' project.owner.username project.slug pr.number %}">
        {% include 'project_app/pull_requests/detail_partials/pr_detail_breadcrumb.html' %}
        {% include 'project_app/pull_requests/detail_partials/pr_detail_header.html' %}
        <div class="row">
            <div class="col-lg-9">
                {% include 'project_app/pull_requests/detail_partials/pr_detail_tabs.html' %}
                <!-- Tab Content -->
                {% if active_tab == 'conversation' %}
                    {% include 'project_app/pull_requests/detail_partials/pr_detail_conversation.html' %}
                {% elif active_tab == 'commits' %}
                    {% include 'project_app/pull_requests/detail_partials/pr_detail_commits.html' %}
                {% elif active_tab == 'files' %}
                    {% include 'project_app/pull_requests/detail_partials/pr_detail_diff.html' %}
                {% elif active_tab == 'checks' %}
                    {% include 'project_app/pull_requests/detail_partials/pr_detail_checks.html' %}
                {% endif %}
                </div>
                <!-- Sidebar -->
                <div class="col-lg-3">
                    {% include 'project_app/pull_requests/detail_partials/pr_detail_sidebar.html' %}
                </div>
            </div>
        </div>
        <div id="mergeModal"
             data-merge-url="{% url 'user_projects:pr_merge' project.owner.username project.slug pr.number %}">
            {% include 'project_app/pull_requests/detail_partials/pr_detail_merge_modal.html' %}
        </div>
    </div>
{% endblock %}
    {% block extra_js %}
        <script src="{% static 'project_app/js/pull_requests/detail.js' %}"></script>
    {% endblock %}
