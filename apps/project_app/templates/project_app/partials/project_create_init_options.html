{% load static %}
<!-- Radio buttons for initialization options -->
<div style="display: flex; flex-direction: column; gap: 1rem;">
    <!-- Option 1: Create new -->
    <div style="display: flex; align-items: start; gap: 0.75rem;">
        <input type="radio" id="init_gitea" name="init_type" value="gitea" checked
               style="margin-top: 0.25rem; width: 18px; height: 18px; cursor: pointer;">
        <div style="flex: 1;">
            <label for="init_gitea" style="margin-bottom: 0.25rem; cursor: pointer; font-weight: 500;">
                Create new
            </label>
            <div class="help-text">
                Start with an empty repository
            </div>
        </div>
    </div>

    <!-- Option 2: Import existing -->
    <div style="display: flex; align-items: start; gap: 0.75rem;">
        <input type="radio" id="init_github" name="init_type" value="github"
               style="margin-top: 0.25rem; width: 18px; height: 18px; cursor: pointer;">
        <div style="flex: 1;">
            <label for="init_github" style="margin-bottom: 0.25rem; cursor: pointer; font-weight: 500;">
                Import from GitHub/GitLab
            </label>
            <div class="help-text">
                Bring your existing repository into SciTeX
            </div>
        </div>
    </div>
</div>

<!-- Import URL Input -->
<div id="github_url_input" style="display: none; margin-top: 1rem; margin-left: 2.25rem;">
    <label class="form-label" for="github_url">
        Repository URL
    </label>
    <input type="text" name="git_url" id="github_url" class="form-control"
           placeholder="https://github.com/username/repository or git@github.com:username/repo.git"
           style="max-width: 600px;">
    <div class="help-text" style="margin-top: 0.5rem;">
        Both formats supported:<br>
        • HTTPS: <code>https://github.com/username/repo</code><br>
        • SSH: <code>git@github.com:username/repo.git</code>
    </div>

    <label class="form-label" for="github_token" style="margin-top: 0.75rem;">
        Access Token (Optional - for private repos)
    </label>
    <input type="password" name="github_token" id="github_token" class="form-control"
           placeholder="Leave empty to use saved token from profile settings"
           style="max-width: 600px;">
    <div class="help-text" style="margin-top: 0.5rem;">
        {% if user.profile.github_token %}
            <img src="{% static 'project_app/icons/check.svg' %}" alt="" style="width: 16px; height: 16px; vertical-align: text-bottom; margin-right: 4px;">Using saved token from <a href="{% url 'accounts_app:profile_edit' %}">profile settings</a>
        {% else %}
            <img src="{% static 'project_app/icons/lightbulb.svg' %}" alt="" style="width: 16px; height: 16px; vertical-align: text-bottom; margin-right: 4px;"><a href="{% url 'accounts_app:profile_edit' %}">Save token in profile</a> to avoid entering it each time<br>
        {% endif %}
        Create token:
        <a href="https://github.com/settings/tokens" target="_blank">GitHub</a> |
        <a href="https://gitlab.com/-/profile/personal_access_tokens" target="_blank">GitLab</a>
    </div>
</div>

<!-- Git URL Input (for Git cloning) -->
<div id="git_url_input" style="display: none; margin-top: 1rem; margin-left: 2.25rem;">
    <label class="form-label" for="git_url">
        Repository URL
    </label>
    <input type="text" name="git_url" id="git_url" class="form-control"
           placeholder="https://github.com/username/repository.git or git@github.com:username/repository.git"
           style="max-width: 600px;">
    <div class="help-text" style="margin-top: 0.5rem;">
        Enter the repository URL in HTTPS or SSH format:
        <br>• HTTPS: <code>https://github.com/user/repo.git</code>
        <br>• SSH: <code>git@github.com:user/repo.git</code> (requires <a href="/profile/settings/ssh-keys/" target="_blank">SSH key setup</a>)
    </div>
</div>

<!-- Template Type Selector (hidden by default) -->
<div id="template_type_selector" style="display: none; margin-top: 1rem; margin-left: 2.25rem;">
    <label class="form-label" for="template_select">
        Template Type
    </label>
    <select name="template_type" class="form-control" style="max-width: 600px;" id="template_select">
        {% for template in available_templates %}
        <option value="{{ template.id }}" {% if forloop.first %}selected{% endif %}>
            {{ template.name }} - {{ template.description }}
        </option>
        {% endfor %}
    </select>
    <div class="help-text" style="margin-top: 0.5rem;" id="template_info">
        Select the type of template that best fits your project needs.
    </div>

    <!-- Template details (shown when hovering/selecting) -->
    {% for template in available_templates %}
    <div class="template-details" data-template-id="{{ template.id }}" style="display: none; margin-top: 0.75rem; padding: 1rem; background: #f8f9fa; border-radius: 4px; border-left: 3px solid #007acc;">
        <div style="font-weight: 500; margin-bottom: 0.5rem;">{{ template.name }}</div>
        <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.75rem;">{{ template.use_case }}</div>
        <div style="font-size: 0.85rem; color: #666;">
            <strong>Features:</strong>
            <ul style="margin: 0.5rem 0 0 1.5rem; padding: 0;">
                {% for feature in template.features %}
                <li>{{ feature }}</li>
                {% endfor %}
            </ul>
        </div>
        <div style="margin-top: 0.5rem; font-size: 0.85rem;">
            <a href="{{ template.github_url }}" target="_blank" style="color: #007acc;">
                View template on GitHub →
            </a>
        </div>
    </div>
    {% endfor %}
</div>
