{% extends "global_base.html" %}
{% block title %}
    QR Code Generator -
    Browser Tool | SciTeX
{% endblock %}
{% block meta_description %}
    Generate QR codes for URLs, text, DOIs, contact info, and more. Customize size, colors, and error correction. Download as PNG or SVG.
{% endblock %}
{% block head_extra %}
    {% load static %}
    <link rel="icon"
          type="image/png"
          sizes="192x192"
          href="{% static 'images/vectorstock_38853699/vectorstock_38853699-navy-inverted-192x192.png' %}?v=3" />
    <link rel="icon"
          type="image/png"
          sizes="48x48"
          href="{% static 'images/vectorstock_38853699/vectorstock_38853699-navy-inverted-48x48.png' %}?v=3" />
    <link rel="shortcut icon"
          href="{% static 'images/vectorstock_38853699/vectorstock_38853699-navy.ico' %}?v=3" />
    <!-- QR Code library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
{% endblock %}
{% block extra_css %}
    {% load static %}
    <style>
  .tool-detail-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .tool-header {
    text-align: center;
    padding: 40px 20px;
    margin-bottom: 40px;
  }

  .tool-icon-large {
    font-size: 64px;
    margin-bottom: 20px;
  }

  .tool-title {
    font-size: 42px;
    font-weight: 700;
    margin-bottom: 16px;
    color: var(--text-primary);
  }

  .tool-subtitle {
    font-size: 18px;
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto 30px;
    line-height: 1.6;
  }

  .tool-breadcrumb {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 16px;
  }

  .tool-breadcrumb a {
    color: #4a9b7e;
    text-decoration: none;
  }

  .tool-breadcrumb a:hover {
    text-decoration: underline;
  }

  .tool-app-container {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 40px;
    margin-bottom: 40px;
  }

  .controls-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
  }

  @media (max-width: 768px) {
    .controls-grid {
      grid-template-columns: 1fr;
    }
  }

  .control-section {
    background: var(--bg-primary);
    padding: 20px;
    border-radius: 8px;
  }

  .control-group {
    margin-bottom: 20px;
  }

  .control-group:last-child {
    margin-bottom: 0;
  }

  .control-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
  }

  .control-input,
  .control-select,
  .control-textarea {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 14px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-family: inherit;
  }

  .control-textarea {
    resize: vertical;
    min-height: 100px;
    font-family: 'Courier New', monospace;
  }

  .control-input:focus,
  .control-select:focus,
  .control-textarea:focus {
    outline: none;
    border-color: #4a9b7e;
  }

  .color-input-group {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .color-input-group input[type="color"] {
    width: 60px;
    height: 40px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
  }

  .color-input-group input[type="text"] {
    flex: 1;
  }

  .preview-section {
    text-align: center;
  }

  .qr-preview {
    background: white;
    padding: 30px;
    border-radius: 8px;
    display: inline-block;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
  }

  #qrCanvas {
    display: block;
  }

  .action-buttons {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
  }

  .btn-primary {
    background: #4a9b7e;
    color: white;
  }

  .btn-primary:hover:not(:disabled) {
    background: #3a7c65;
  }

  .btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
  }

  .btn-secondary:hover:not(:disabled) {
    background: var(--bg-secondary);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .template-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }

  .template-btn {
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    cursor: pointer;
  }

  .template-btn:hover {
    background: var(--bg-secondary);
  }

  .tool-section {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 30px;
    margin-bottom: 30px;
  }

  .tool-section-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 20px;
    color: var(--text-primary);
  }

  .tool-section-content {
    color: var(--text-secondary);
    line-height: 1.8;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .feature-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .feature-icon {
    font-size: 20px;
    line-height: 1;
    margin-top: 2px;
  }

  .feature-text {
    flex: 1;
  }

  .feature-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
  }

  .feature-desc {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.5;
  }
    </style>
{% endblock %}
{% block content %}
    <div class="tool-detail-container">
        <!-- Breadcrumb -->
        <div class="tool-breadcrumb">
            <a href="{% url 'public_app:tools' %}">‚Üê Back to Tools</a>
        </div>
        <!-- Header -->
        <div class="tool-header">
            <div class="tool-icon-large">üì±</div>
            <h1 class="tool-title">QR Code Generator</h1>
            <p class="tool-subtitle">
                Generate customizable QR codes for URLs, text, DOIs, contact info, and more.
                Perfect for posters, presentations, and publications.
            </p>
        </div>
        <!-- Main Tool -->
        <div class="tool-app-container">
            <div class="controls-grid">
                <!-- Left Column: Content -->
                <div class="control-section">
                    <h3 style="margin-top: 0; margin-bottom: 15px; font-size: 18px;">Content</h3>
                    <div class="control-group">
                        <label class="control-label">Quick Templates</label>
                        <div class="template-buttons">
                            <button class="template-btn" data-template="url">URL</button>
                            <button class="template-btn" data-template="doi">DOI</button>
                            <button class="template-btn" data-template="email">Email</button>
                            <button class="template-btn" data-template="phone">Phone</button>
                            <button class="template-btn" data-template="wifi">WiFi</button>
                            <button class="template-btn" data-template="vcard">vCard</button>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="contentInput">Content</label>
                        <textarea id="contentInput"
                                  class="control-textarea"
                                  placeholder="Enter URL, text, or use a template above...">https://scitex.ai</textarea>
                    </div>
                </div>
                <!-- Right Column: Styling -->
                <div class="control-section">
                    <h3 style="margin-top: 0; margin-bottom: 15px; font-size: 18px;">Styling</h3>
                    <div class="control-group">
                        <label class="control-label" for="sizeInput">Size (px)</label>
                        <input type="number"
                               id="sizeInput"
                               class="control-input"
                               value="256"
                               min="128"
                               max="1024"
                               step="32" />
                    </div>
                    <div class="control-group">
                        <label class="control-label">Foreground Color</label>
                        <div class="color-input-group">
                            <input type="color" id="fgColorPicker" value="#000000" />
                            <input type="text" id="fgColorInput" class="control-input" value="#000000" />
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Background Color</label>
                        <div class="color-input-group">
                            <input type="color" id="bgColorPicker" value="#ffffff" />
                            <input type="text" id="bgColorInput" class="control-input" value="#ffffff" />
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="errorLevelInput">Error Correction</label>
                        <select id="errorLevelInput" class="control-select">
                            <option value="L">Low (7%)</option>
                            <option value="M" selected>Medium (15%)</option>
                            <option value="Q">Quartile (25%)</option>
                            <option value="H">High (30%)</option>
                        </select>
                    </div>
                </div>
            </div>
            <!-- Preview -->
            <div class="preview-section">
                <div class="qr-preview">
                    <canvas id="qrCanvas"></canvas>
                </div>
                <div class="action-buttons">
                    <button id="downloadPngBtn" class="btn btn-primary">üíæ Download PNG</button>
                    <button id="downloadSvgBtn" class="btn btn-secondary">üìÑ Download SVG</button>
                </div>
            </div>
        </div>
        <!-- Features -->
        <div class="tool-section">
            <h2 class="tool-section-title">‚ú® Features</h2>
            <div class="features-grid">
                <div class="feature-item">
                    <span class="feature-icon">üé®</span>
                    <div class="feature-text">
                        <div class="feature-title">Fully Customizable</div>
                        <div class="feature-desc">Custom colors, sizes, and error correction</div>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">‚ö°</span>
                    <div class="feature-text">
                        <div class="feature-title">Quick Templates</div>
                        <div class="feature-desc">Pre-built formats for common use cases</div>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üíæ</span>
                    <div class="feature-text">
                        <div class="feature-title">Multiple Formats</div>
                        <div class="feature-desc">Download as PNG or SVG</div>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üëÅÔ∏è</span>
                    <div class="feature-text">
                        <div class="feature-title">Live Preview</div>
                        <div class="feature-desc">See changes instantly</div>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üî¨</span>
                    <div class="feature-text">
                        <div class="feature-title">Research-Friendly</div>
                        <div class="feature-desc">Perfect for DOIs, papers, posters</div>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üîí</span>
                    <div class="feature-text">
                        <div class="feature-title">100% Private</div>
                        <div class="feature-desc">All processing in your browser</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Use Cases -->
        <div class="tool-section">
            <h2 class="tool-section-title">üìñ Common Use Cases</h2>
            <div class="tool-section-content">
                <ul style="line-height: 2; padding-left: 20px;">
                    <li>
                        <strong>Research Papers:</strong> Link to DOIs, supplementary materials, datasets
                    </li>
                    <li>
                        <strong>Posters & Presentations:</strong> Quick access to full papers, lab websites
                    </li>
                    <li>
                        <strong>Lab Equipment:</strong> Link to protocols, manuals, calibration data
                    </li>
                    <li>
                        <strong>Contact Sharing:</strong> vCard for easy networking at conferences
                    </li>
                    <li>
                        <strong>Event Management:</strong> WiFi credentials for lab meetings, conferences
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <script>
  // DOM elements
  const contentInput = document.getElementById('contentInput');
  const sizeInput = document.getElementById('sizeInput');
  const fgColorPicker = document.getElementById('fgColorPicker');
  const fgColorInput = document.getElementById('fgColorInput');
  const bgColorPicker = document.getElementById('bgColorPicker');
  const bgColorInput = document.getElementById('bgColorInput');
  const errorLevelInput = document.getElementById('errorLevelInput');
  const qrCanvas = document.getElementById('qrCanvas');
  const downloadPngBtn = document.getElementById('downloadPngBtn');
  const downloadSvgBtn = document.getElementById('downloadSvgBtn');
  const templateButtons = document.querySelectorAll('.template-btn');

  // Templates
  const templates = {
    url: 'https://scitex.ai',
    doi: 'https://doi.org/10.1038/s41586-020-2649-2',
    email: 'mailto:user@example.com',
    phone: 'tel:+1234567890',
    wifi: 'WIFI:T:WPA;S:NetworkName;P:Password;;',
    vcard: 'BEGIN:VCARD\nVERSION:3.0\nFN:John Doe\nORG:University\nTEL:+1234567890\nEMAIL:john@example.com\nEND:VCARD'
  };

  // Template buttons
  templateButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const template = btn.dataset.template;
      contentInput.value = templates[template];
      generateQR();
    });
  });

  // Color pickers sync
  fgColorPicker.addEventListener('input', (e) => {
    fgColorInput.value = e.target.value;
    generateQR();
  });

  fgColorInput.addEventListener('input', (e) => {
    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
      fgColorPicker.value = e.target.value;
      generateQR();
    }
  });

  bgColorPicker.addEventListener('input', (e) => {
    bgColorInput.value = e.target.value;
    generateQR();
  });

  bgColorInput.addEventListener('input', (e) => {
    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
      bgColorPicker.value = e.target.value;
      generateQR();
    }
  });

  // Generate QR on input change
  [contentInput, sizeInput, errorLevelInput].forEach(el => {
    el.addEventListener('input', generateQR);
  });

  // Generate QR code
  function generateQR() {
    const content = contentInput.value.trim();
    if (!content) {
      qrCanvas.getContext('2d').clearRect(0, 0, qrCanvas.width, qrCanvas.height);
      return;
    }

    const size = parseInt(sizeInput.value) || 256;
    const fgColor = fgColorInput.value;
    const bgColor = bgColorInput.value;
    const errorLevel = errorLevelInput.value;

    QRCode.toCanvas(qrCanvas, content, {
      width: size,
      margin: 2,
      color: {
        dark: fgColor,
        light: bgColor
      },
      errorCorrectionLevel: errorLevel
    }, (error) => {
      if (error) console.error('QR Code Error:', error);
    });
  }

  // Download PNG
  downloadPngBtn.addEventListener('click', () => {
    const url = qrCanvas.toDataURL('image/png');
    const a = document.createElement('a');
    a.href = url;
    a.download = `qrcode-${Date.now()}.png`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  });

  // Download SVG
  downloadSvgBtn.addEventListener('click', () => {
    const content = contentInput.value.trim();
    if (!content) return;

    const size = parseInt(sizeInput.value) || 256;
    const fgColor = fgColorInput.value;
    const bgColor = bgColorInput.value;
    const errorLevel = errorLevelInput.value;

    QRCode.toString(content, {
      type: 'svg',
      width: size,
      margin: 2,
      color: {
        dark: fgColor,
        light: bgColor
      },
      errorCorrectionLevel: errorLevel
    }, (error, svg) => {
      if (error) {
        console.error('SVG Error:', error);
        return;
      }

      const blob = new Blob([svg], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `qrcode-${Date.now()}.svg`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  });

  // Initial generation
  generateQR();
    </script>
{% endblock %}
