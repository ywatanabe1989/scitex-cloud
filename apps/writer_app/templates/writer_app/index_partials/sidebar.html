    <!-- Sidebar -->
    <div class="writer-sidebar" id="writer-sidebar">
        <div class="sidebar-content">
            <!-- TeX Files Browser -->
            <div class="tex-files-browser mb-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="fw-bold mb-0">
                        <i class="fas fa-folder-tree me-2"></i>TeX Files
                    </h6>
                    <button id="refresh-files-btn" class="btn btn-sm btn-outline-primary" title="Refresh file list">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>

                <!-- File list container -->
                <div id="tex-files-list" class="tex-files-list">
                    <div class="text-muted text-center py-3" style="font-size: 0.85rem;">
                        <i class="fas fa-spinner fa-spin me-2"></i>Loading files...
                    </div>
                </div>
            </div>

            <!-- Version History Timeline -->
            <div class="history-timeline-section mb-4">
                <div id="history-timeline-container">
                    <!-- History timeline will be rendered here by history_timeline.js -->
                </div>
            </div>

            <div class="action-buttons">
                <!-- Initialize with Template Button (shown only when not initialized) -->
                <button id="init-writer-btn" class="btn btn-success w-100 mb-2" style="display: {% if writer_initialized %}none{% else %}block{% endif %};">
                    <i class="fas fa-rocket me-2"></i>Create Workspace
                </button>

                <button id="export-btn" class="btn btn-outline-secondary w-100">
                    <i class="fas fa-download me-2"></i>Export
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Section Panel (Initially Hidden) -->
    <div class="floating-section-panel" id="floating-section-panel" style="display: none;">
        <div class="floating-panel-header">
            <h6 class="mb-0">
                <i class="fas fa-list me-2"></i><span id="sections-title">Active Sections</span>
            </h6>
            <div>
                <button id="manage-sections-btn" class="btn btn-sm btn-outline-primary me-2" title="Add/Remove Sections">
                    <i class="fas fa-plus"></i>
                </button>
                <button id="close-section-panel" class="btn btn-sm btn-outline-secondary" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="floating-panel-content">
            <div class="section-list">
                <!-- Active sections will be dynamically generated -->
                <div class="section-items"></div>

                <!-- Available sections pool (initially hidden) -->
                <div id="section-pool" class="section-pool mt-3" style="display: none;">
                    <hr>
                    <h6 class="text-muted mb-2" style="font-size: 0.85rem;">
                        <i class="fas fa-layer-group me-1"></i>Available Sections
                    </h6>
                    <div id="available-sections" class="available-sections"></div>
                </div>
            </div>
        </div>
    </div>
