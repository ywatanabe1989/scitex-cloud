<!-- Compilation Settings Modal -->
<div class="modal fade"
     id="compilation-settings-modal"
     tabindex="-1"
     aria-labelledby="compilation-settings-modal-label"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content"
             style="background: var(--bg-surface);
                    border: 1px solid var(--border-muted)">
            <div class="modal-header"
                 style="border-bottom: 1px solid var(--border-default);
                        padding: 1rem 1.5rem">
                <h5 class="modal-title"
                    id="compilation-settings-modal-label"
                    style="color: var(--text-primary);
                           font-size: 1.125rem;
                           font-weight: 600;
                           margin: 0">
                    <i class="fas fa-cog"
                       style="color: var(--text-muted);
                              margin-right: 0.5rem"></i>Compilation Settings
                </h5>
                <button type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                        style="filter: opacity(0.6)"></button>
            </div>
            <div class="modal-body"
                 style="max-height: 70vh;
                        overflow-y: auto;
                        padding: 1.5rem">
                <form id="compilation-settings-form">
                    <!-- Automation Settings Table -->
                    <h6 style="color: var(--text-primary);
                               font-size: 0.9375rem;
                               font-weight: 600;
                               margin: 0 0 0.75rem 0;
                               display: flex;
                               align-items: center;
                               gap: 0.5rem">
                        <i class="fas fa-magic" style="color: var(--status-info)"></i>
                        Automation Settings
                    </h6>
                    <table style="width: 100%;
                                  border-collapse: collapse;
                                  margin-bottom: 1.5rem;
                                  background: var(--bg-muted);
                                  border: 1px solid var(--border-muted);
                                  border-radius: 8px;
                                  overflow: hidden">
                        <thead>
                            <tr style="background: var(--bg-surface); border-bottom: 1px solid var(--border-default)">
                                <th style="padding: 0.75rem 1rem; text-align: left; font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary)">Setting</th>
                                <th style="padding: 0.75rem 1rem; text-align: center; font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary); width: 80px">Enable</th>
                                <th style="padding: 0.75rem 1rem; text-align: center; font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary); width: 100px">Delay (s)</th>
                                <th style="padding: 0.75rem 1rem; text-align: left; font-size: 0.8125rem; font-weight: 600; color: var(--text-secondary)">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid var(--border-muted)">
                                <td style="padding: 0.75rem 1rem; font-size: 0.8125rem; color: var(--text-primary); font-weight: 500">Auto Preview</td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input class="form-check-input" type="checkbox" id="setting-auto-preview" checked style="margin: 0" />
                                </td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input type="number" class="form-control form-control-sm" id="setting-auto-preview-delay" min="1" max="60" value="5" style="width: 60px; font-size: 0.8125rem; margin: 0 auto" />
                                </td>
                                <td style="padding: 0.75rem 1rem; font-size: 0.75rem; color: var(--text-muted)">Quick preview after typing</td>
                            </tr>
                            <tr style="border-bottom: 1px solid var(--border-muted)">
                                <td style="padding: 0.75rem 1rem; font-size: 0.8125rem; color: var(--text-primary); font-weight: 500">Auto Full Compile</td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input class="form-check-input" type="checkbox" id="setting-auto-full" style="margin: 0" />
                                </td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input type="number" class="form-control form-control-sm" id="setting-auto-full-delay" min="5" max="120" value="15" style="width: 60px; font-size: 0.8125rem; margin: 0 auto" />
                                </td>
                                <td style="padding: 0.75rem 1rem; font-size: 0.75rem; color: var(--text-muted)">Full manuscript with bibliography</td>
                            </tr>
                            <tr style="border-bottom: 1px solid var(--border-muted)">
                                <td style="padding: 0.75rem 1rem; font-size: 0.8125rem; color: var(--text-primary); font-weight: 500">Compile on Save</td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input class="form-check-input" type="checkbox" id="setting-compile-on-save" style="margin: 0" />
                                </td>
                                <td style="padding: 0.75rem 1rem; text-align: center; color: var(--text-muted); font-size: 0.75rem">—</td>
                                <td style="padding: 0.75rem 1rem; font-size: 0.75rem; color: var(--text-muted)">Trigger on Ctrl+S</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem 1rem; font-size: 0.8125rem; color: var(--text-primary); font-weight: 500">Show Log Default</td>
                                <td style="padding: 0.75rem 1rem; text-align: center">
                                    <input class="form-check-input" type="checkbox" id="setting-show-log" checked style="margin: 0" />
                                </td>
                                <td style="padding: 0.75rem 1rem; text-align: center; color: var(--text-muted); font-size: 0.75rem">—</td>
                                <td style="padding: 0.75rem 1rem; font-size: 0.75rem; color: var(--text-muted)">Auto-show compilation output</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Divider -->
                    <div style="height: 1px;
                                background: var(--border-default);
                                margin: 2rem 0"></div>
                    <!-- Full Compilation Options Section -->
                    <div style="margin-bottom: 1.5rem">
                        <h5 style="color: var(--text-primary);
                                   font-size: 1rem;
                                   font-weight: 600;
                                   margin: 0 0 0.5rem 0;
                                   display: flex;
                                   align-items: center;
                                   gap: 0.5rem">
                            <i class="fas fa-cogs"
                               style="color: var(--text-muted);
                                      font-size: 1.125rem"></i>
                            Full Compilation Options
                        </h5>
                        <p style="color: var(--text-muted);
                                  font-size: 0.8125rem;
                                  margin: 0 0 1rem 0">
                            These options apply to the next full manuscript compilation
                        </p>
                    </div>
                    <!-- Options Grid -->
                    <div style="display: grid;
                                grid-template-columns: repeat(2, 1fr);
                                gap: 1rem;
                                margin-bottom: 1.5rem">
                        <!-- Content Card -->
                        <div style="background: var(--bg-muted);
                                    border: 1px solid var(--border-muted);
                                    border-radius: 8px;
                                    padding: 1rem">
                            <h6 style="color: var(--text-primary);
                                       font-size: 0.875rem;
                                       font-weight: 600;
                                       margin: 0 0 0.75rem 0;
                                       display: flex;
                                       align-items: center;
                                       gap: 0.375rem">
                                <i class="fas fa-file-alt"
                                   style="color: var(--status-info);
                                          font-size: 0.875rem"></i>
                                Content
                            </h6>
                            <div style="display: flex;
                                        flex-direction: column;
                                        gap: 0.5rem">
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-add-figs"
                                           checked
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-add-figs"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Include Figures
                                    </label>
                                </div>
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-add-tables"
                                           checked
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-add-tables"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Include Tables
                                    </label>
                                </div>
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-add-diff"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-add-diff"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Generate Diff
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- Figure Processing Card -->
                        <div style="background: var(--bg-muted);
                                    border: 1px solid var(--border-muted);
                                    border-radius: 8px;
                                    padding: 1rem">
                            <h6 style="color: var(--text-primary);
                                       font-size: 0.875rem;
                                       font-weight: 600;
                                       margin: 0 0 0.75rem 0;
                                       display: flex;
                                       align-items: center;
                                       gap: 0.375rem">
                                <i class="fas fa-images"
                                   style="color: var(--status-success);
                                          font-size: 0.875rem"></i>
                                Figure Processing
                            </h6>
                            <div style="display: flex;
                                        flex-direction: column;
                                        gap: 0.5rem">
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-ppt2tif"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-ppt2tif"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        PowerPoint → TIF
                                    </label>
                                </div>
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-crop-tif"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-crop-tif"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Crop TIF Images
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- Performance Card -->
                        <div style="background: var(--bg-muted);
                                    border: 1px solid var(--border-muted);
                                    border-radius: 8px;
                                    padding: 1rem">
                            <h6 style="color: var(--text-primary);
                                       font-size: 0.875rem;
                                       font-weight: 600;
                                       margin: 0 0 0.75rem 0;
                                       display: flex;
                                       align-items: center;
                                       gap: 0.375rem">
                                <i class="fas fa-bolt"
                                   style="color: var(--status-warning);
                                          font-size: 0.875rem"></i>
                                Performance
                            </h6>
                            <div style="display: flex;
                                        flex-direction: column;
                                        gap: 0.5rem">
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-draft"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-draft"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Draft Mode
                                    </label>
                                </div>
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-quiet"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-quiet"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Quiet Mode
                                    </label>
                                </div>
                            </div>
                        </div>
                        <!-- Advanced Card -->
                        <div style="background: var(--bg-muted);
                                    border: 1px solid var(--border-muted);
                                    border-radius: 8px;
                                    padding: 1rem">
                            <h6 style="color: var(--text-primary);
                                       font-size: 0.875rem;
                                       font-weight: 600;
                                       margin: 0 0 0.75rem 0;
                                       display: flex;
                                       align-items: center;
                                       gap: 0.375rem">
                                <i class="fas fa-tools"
                                   style="color: var(--status-error);
                                          font-size: 0.875rem"></i>
                                Advanced
                            </h6>
                            <div style="display: flex;
                                        flex-direction: column;
                                        gap: 0.5rem">
                                <div class="form-check"
                                     style="padding-left: 1.5rem">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           id="option-force"
                                           style="margin-top: 0.125rem" />
                                    <label class="form-check-label"
                                           for="option-force"
                                           style="color: var(--text-secondary);
                                                  font-size: 0.8125rem">
                                        Force Recompilation
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer"
                 style="border-top: 1px solid var(--border-default);
                        padding: 1rem 1.5rem;
                        display: flex;
                        gap: 0.75rem;
                        justify-content: space-between;
                        align-items: center">
                <button type="button"
                        class="btn btn-sm btn-outline-secondary"
                        id="reset-compilation-settings"
                        style="font-size: 0.8125rem">
                    <i class="fas fa-undo"
                       style="font-size: 0.75rem;
                              margin-right: 0.375rem"></i>
                    Reset to Defaults
                </button>
                <div style="display: flex;
                            gap: 0.5rem">
                    <button type="button"
                            class="btn btn-sm btn-outline-secondary"
                            data-bs-dismiss="modal"
                            style="font-size: 0.8125rem">
                        Cancel
                    </button>
                    <button type="button"
                            class="btn btn-sm btn-success"
                            id="save-compilation-settings"
                            style="font-size: 0.8125rem">
                        <i class="fas fa-save"
                           style="font-size: 0.75rem;
                                  margin-right: 0.375rem"></i>
                        Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
