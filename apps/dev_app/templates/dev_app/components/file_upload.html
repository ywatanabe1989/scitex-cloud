{% extends "global_base.html" %}

{% block title %}File Upload - SciTeX Design System{% endblock %}

{% block meta_description %}Drag-and-drop file upload with visual feedback and multiple file support.{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'dev_app/css/design-demo.css' %}">
<link rel="stylesheet" href="{% static 'css/common/code-blocks.css' %}">
<link rel="stylesheet" href="{% static 'dev_app/styles/design.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/zenburn.min.css">
{% endblock %}

{% block content %}
<section class="design-header">
  <div class="container">
    <h1>File Upload</h1>
    <p class="design-subtitle">Drag-and-drop file upload with visual feedback</p>
  </div>
</section>

<div class="container py-5">
  <div class="design-layout">
    {% include 'dev_app/design_partial/sidebar.html' %}

    <main class="design-main">
      <section>
        <h2>Overview</h2>
        <p>File upload components allow users to select and upload files. They support drag-and-drop interaction for a better user experience and can handle single or multiple files.</p>
        <p><strong>Category:</strong> Form and Selection</p>
        <p><strong>Dark Mode Support:</strong> Yes</p>
        <p><strong>Production Classes:</strong> <code>.file-upload</code>, <code>.file-upload-label</code>, <code>.file-upload-button</code></p>
      </section>

      <section class="design-section">
        <h2>Component Demo</h2>
        <div class="component-demo">
          <!-- Drag and Drop Upload Area -->
          <h3>Drag and Drop Upload</h3>
          <div class="file-upload">
            <input type="file" id="fileInput1" class="file-upload-input">
            <label for="fileInput1" class="file-upload-label">
              <span class="file-upload-icon">‚òÅÔ∏è</span>
              <span class="file-upload-text">Click to upload or drag and drop</span>
            </label>
          </div>

          <!-- Multiple Files Upload -->
          <h3 style="margin-top: 2rem;">Multiple Files Upload</h3>
          <div class="file-upload">
            <input type="file" id="fileInput2" class="file-upload-input" multiple>
            <label for="fileInput2" class="file-upload-label">
              <span class="file-upload-icon">üìÅ</span>
              <span class="file-upload-text">Drop multiple files here or click to select</span>
            </label>
          </div>

          <!-- Button Style Upload -->
          <h3 style="margin-top: 2rem;">Button Style Upload</h3>
          <div class="file-upload">
            <input type="file" id="fileInput3" class="file-upload-input">
            <label for="fileInput3" class="file-upload-button">
              <span class="file-upload-icon">üìé</span>
              Choose File
            </label>
            <span class="file-upload-text">No file selected</span>
          </div>

          <!-- Small Icon Upload -->
          <h3 style="margin-top: 2rem;">Compact Upload</h3>
          <div class="file-upload">
            <input type="file" id="fileInput4" class="file-upload-input">
            <label for="fileInput4" class="file-upload-button">
              Select File
            </label>
          </div>
        </div>
      </section>

      <section class="design-section">
        <h2>States</h2>
        <ul>
          <li><strong>default</strong> - Empty state with prompt text</li>
          <li><strong>hover</strong> - Highlighted border when hovering</li>
          <li><strong>dragover</strong> - Visual feedback during drag-and-drop</li>
          <li><strong>focus</strong> - Keyboard navigation focus state</li>
          <li><strong>selected</strong> - Shows selected filename</li>
        </ul>
      </section>

      <section class="design-section">
        <h2>Variants</h2>
        <ul>
          <li><strong>Drag-and-Drop Zone</strong> - Large clickable area with drag support using <code>.file-upload-label</code></li>
          <li><strong>Button Style</strong> - Compact button upload using <code>.file-upload-button</code></li>
          <li><strong>Multiple Files</strong> - Accept multiple files with <code>multiple</code> attribute</li>
          <li><strong>With Icon</strong> - Use <code>.file-upload-icon</code> for visual indicator</li>
          <li><strong>With Text</strong> - Use <code>.file-upload-text</code> for status or instructions</li>
        </ul>
      </section>

      <section class="design-section">
        <h2>HTML Example</h2>
        <pre><code class="language-html">&lt;!-- Drag-and-Drop Upload --&gt;
&lt;div class="file-upload"&gt;
  &lt;input type="file" id="file1" class="file-upload-input"&gt;
  &lt;label for="file1" class="file-upload-label"&gt;
    &lt;span class="file-upload-icon"&gt;‚òÅÔ∏è&lt;/span&gt;
    &lt;span class="file-upload-text"&gt;Click to upload or drag and drop&lt;/span&gt;
  &lt;/label&gt;
&lt;/div&gt;

&lt;!-- Button Style Upload --&gt;
&lt;div class="file-upload"&gt;
  &lt;input type="file" id="file2" class="file-upload-input"&gt;
  &lt;label for="file2" class="file-upload-button"&gt;
    &lt;span class="file-upload-icon"&gt;üìé&lt;/span&gt;
    Choose File
  &lt;/label&gt;
  &lt;span class="file-upload-text"&gt;No file selected&lt;/span&gt;
&lt;/div&gt;

&lt;!-- Multiple Files --&gt;
&lt;div class="file-upload"&gt;
  &lt;input type="file" id="file3" class="file-upload-input" multiple&gt;
  &lt;label for="file3" class="file-upload-label"&gt;
    &lt;span class="file-upload-icon"&gt;üìÅ&lt;/span&gt;
    &lt;span class="file-upload-text"&gt;Drop files here&lt;/span&gt;
  &lt;/label&gt;
&lt;/div&gt;</code></pre>
      </section>

      <section class="design-section">
        <h2>JavaScript Example for Drag-and-Drop</h2>
        <pre><code class="language-javascript">// Add dragover visual feedback
const uploadLabel = document.querySelector('.file-upload-label');

uploadLabel.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadLabel.classList.add('dragover');
});

uploadLabel.addEventListener('dragleave', () => {
  uploadLabel.classList.remove('dragover');
});

uploadLabel.addEventListener('drop', (e) => {
  e.preventDefault();
  uploadLabel.classList.remove('dragover');
  const files = e.dataTransfer.files;
  // Handle files
});</code></pre>
      </section>

      <section class="design-section">
        <h2>CSS Classes</h2>
        <table class="design-table">
          <thead>
            <tr>
              <th>Class</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>.file-upload</code></td>
              <td>Container for file upload component</td>
            </tr>
            <tr>
              <td><code>.file-upload-input</code></td>
              <td>Hidden native file input (opacity: 0)</td>
            </tr>
            <tr>
              <td><code>.file-upload-label</code></td>
              <td>Large drag-and-drop upload area (dashed border)</td>
            </tr>
            <tr>
              <td><code>.file-upload-button</code></td>
              <td>Button-style upload trigger (solid button)</td>
            </tr>
            <tr>
              <td><code>.file-upload-icon</code></td>
              <td>Upload icon indicator</td>
            </tr>
            <tr>
              <td><code>.file-upload-text</code></td>
              <td>Text showing instructions or selected filename</td>
            </tr>
            <tr>
              <td><code>.dragover</code></td>
              <td>Applied to .file-upload-label during drag-over</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="design-section">
        <h2>Usage Guidelines</h2>
        <ul>
          <li>Use <code>.file-upload-label</code> for prominent upload areas where drag-and-drop is important</li>
          <li>Use <code>.file-upload-button</code> for compact upload buttons in forms</li>
          <li>Always provide clear feedback about file size limits and accepted file types</li>
          <li>Add the <code>multiple</code> attribute when users can upload multiple files</li>
          <li>Consider adding file type restrictions with the <code>accept</code> attribute</li>
          <li>Show visual feedback during drag-over by toggling the <code>.dragover</code> class</li>
          <li>Display selected filenames after selection for user confirmation</li>
        </ul>
      </section>
    </main>
  </div>
</div>

<script>
// Demo: Add visual feedback for drag events
document.querySelectorAll('.file-upload-label').forEach(label => {
  label.addEventListener('dragover', (e) => {
    e.preventDefault();
    label.classList.add('dragover');
  });

  label.addEventListener('dragleave', () => {
    label.classList.remove('dragover');
  });

  label.addEventListener('drop', (e) => {
    e.preventDefault();
    label.classList.remove('dragover');
  });
});

// Demo: Show selected filename
document.querySelectorAll('.file-upload-input').forEach(input => {
  input.addEventListener('change', (e) => {
    const files = e.target.files;
    const textSpan = input.parentElement.querySelector('.file-upload-text');

    if (textSpan && files.length > 0) {
      if (files.length === 1) {
        textSpan.textContent = files[0].name;
      } else {
        textSpan.textContent = `${files.length} files selected`;
      }
    }
  });
});
</script>
{% endblock %}

{% block extra_js %}
{% load static %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre code').forEach((block) => {
      hljs.highlightElement(block);
    });
  });
</script>
<script src="{% static 'js/code-blocks.js' %}"></script>
{% endblock %}
