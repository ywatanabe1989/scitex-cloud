{% load static %}
<link rel="stylesheet" href="{% static 'scholar_app/css/bibtex/bibtex-status-tiles.css' %}?v={{ request.timestamp|default:'1' }}" />
<!-- BibTeX Status Tiles - For Right Panel -->
<div class="bibtex-status-tiles">
    <!-- Progress Tile -->
    <div class="bibtex-tile bibtex-tile--expanded" data-panel="progress">
        <div class="bibtex-tile__header" onclick="toggleBibtexPanel(this)">
            <div class="bibtex-tile__title">
                <i class="fas fa-tasks"></i> Progress
            </div>
            <i class="fas fa-chevron-down bibtex-tile__toggle"></i>
        </div>
        <div class="bibtex-tile__content">
            <div class="bibtex-tile__log-header">
                <span>Log</span>
                <button id="copyBibtexLogBtn" class="btn btn-outline-secondary btn-sm" title="Copy log">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div id="processingLog" class="terminal-log terminal-log--medium terminal-log--processing">
                Initializing...
            </div>
        </div>
    </div>

    <!-- Recent Jobs Tile -->
    <div class="bibtex-tile bibtex-tile--expanded" data-panel="recent-jobs">
        <div class="bibtex-tile__header" onclick="toggleBibtexPanel(this)">
            <div class="bibtex-tile__title">
                <i class="fas fa-history"></i> Recent Jobs
            </div>
            <i class="fas fa-chevron-down bibtex-tile__toggle"></i>
        </div>
        <div class="bibtex-tile__content">
            <div id="recentJobsContainer" class="bibtex-jobs-list">
                <!-- Jobs loaded dynamically -->
            </div>
            <div id="noRecentJobsMessage" class="bibtex-empty-state">
                <i class="fas fa-inbox"></i>
                <p>No recent jobs yet</p>
            </div>
        </div>
    </div>

    <!-- Server Status Tile -->
    <div class="bibtex-tile bibtex-tile--expanded" data-panel="server-status">
        <div class="bibtex-tile__header" onclick="toggleBibtexPanel(this)">
            <div class="bibtex-tile__title">
                <i class="fas fa-server"></i> Server Status
            </div>
            <i class="fas fa-chevron-down bibtex-tile__toggle"></i>
        </div>
        <div class="bibtex-tile__content">
            <span id="resourceRefreshTime" class="bibtex-refresh-time">Loading...</span>
            <div class="bibtex-status-grid">
                <div class="bibtex-status-item">
                    <div class="bibtex-status-item__label">Active</div>
                    <div class="bibtex-status-item__value bibtex-status-item__value--active">
                        <span id="activeJobsCount">0</span>
                    </div>
                </div>
                <div class="bibtex-status-item">
                    <div class="bibtex-status-item__label">Queued</div>
                    <div class="bibtex-status-item__value bibtex-status-item__value--queued">
                        <span id="queuedJobsCount">0</span>
                    </div>
                </div>
            </div>
            <div id="activeJobsList" class="hidden">
                <div id="activeJobsContent"></div>
            </div>
            <div id="queuedJobsList" class="hidden">
                <div id="queuedJobsContent"></div>
            </div>
        </div>
    </div>
</div>
<script type="module" src="{% static 'scholar_app/js/bibtex/status-tiles.js' %}?v={{ request.timestamp|default:'1' }}"></script>
