{% extends "scholar_app/scholar_base.html" %}
{% load static %}

{% block title %}SciTeX Scholar - Literature Search{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/components/hero.css' %}">
<link rel="stylesheet" href="{% static 'css/common/scitex-components.css' %}">
<link rel="stylesheet" href="{% static 'css/common/terminal-log.css' %}">
<link rel="stylesheet" href="{% static 'css/common.css' %}">
<link rel="stylesheet" href="{% static 'scholar_app/styles/scholar-index.css' %}">
{% endblock %}

{% block extra_js %}

{% endblock %}

{% block content %}
<!-- Split-Screen Layout -->
<div class="container u-mt-2 u-mb-3">
  <div class="split-container" id="splitContainer">
    {% include "scholar_app/index_partials/enrich.html" %}

    {% include "scholar_app/index_partials/search.html" %}
  </div>

  {% if query %}
  <div class="mt-4">
    {% include "scholar_app/index_partials/search_results_header.html" %}

    {% include "scholar_app/index_partials/api_key_alert.html" %}

    {% include "scholar_app/index_partials/progressive_loading.html" %}

    <!-- Search Results -->
    {% for result in results %}
    {% include "scholar_app/index_partials/result_card.html" %}
    {% endfor %}

    {% include "scholar_app/index_partials/pagination.html" %}
  </div>
  {% else %}
  <!-- Empty state when no query -->
  {% endif %}
</div>

<!-- Configuration for JavaScript -->
<script>
  // Django template variables for JavaScript
  window.SCHOLAR_CONFIG = {
  urls: {
  bibtexUpload: '{% url "scholar_app:bibtex_upload" %}',
  resourceStatus: '{% url "scholar_app:bibtex_resource_status" %}'
  },
  user: {
  isAuthenticated: {% if user.is_authenticated %}true{% else %}false{% endif %}
  }
  };
</script>
<!-- Panel Toggle Functionality -->
<script src="{% static 'scholar_app/scripts/panel-toggle.js' %}"></script>
<!-- BibTeX Enrichment -->
<script src="{% static 'scholar_app/scripts/bibtex-enrichment.js' %}"></script>
<!-- Queue Management -->
<script src="{% static 'scholar_app/scripts/queue-management.js' %}"></script>
<!-- Main Scholar Index Functionality -->
<script src="{% static 'scholar_app/scripts/scholar-index-main.js' %}"></script>

{% endblock %}

