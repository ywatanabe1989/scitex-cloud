{% load static %}

<!-- Integrated Ecosystem -->
<div class="container">
  <section class="section integrated-ecosystem-section" id="products">
    <div class="container">
      <div class="section-heading">
      <h2 style="text-align: center; margin-bottom: 1rem; font-size: 2.5rem;">SciTeX Ecosystem</h2>
        <p style="text-align: center; color: #64748b; margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto;">
          — From literature management to final publication —
        </p>

        <!-- Hierarchical Ecosystem Layout -->
        <div class="ecosystem-hierarchy">

          <!-- Engine at the top -->
          <div class="engine-top-level">
            <div class="module-card-simple">
              <a href="{% url 'engine:index' %}" class="module-card-link">
                <div class="module-icon">
                  <img src="{% static 'images/scitex-engine-icon.svg' %}" alt="SciTeX Engine" width="56" height="56">
                </div>
                <h3>SciTeX Engine</h3>
                <p class="module-tagline">Emacs environment with Claude Code agent</p>
              </a>
            </div>
          </div>

          <!-- SVG Connection lines -->
          <svg class="ecosystem-connections" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">
            <!-- Central vertical line from Engine -->
            <line x1="450" y1="0" x2="450" y2="60" stroke="#94a3b8" stroke-width="3"/>

            <!-- Horizontal distribution line -->
            <line x1="112" y1="60" x2="788" y2="60" stroke="#94a3b8" stroke-width="3"/>

            <!-- Branch lines to each module -->
            <line x1="112" y1="60" x2="112" y2="100" stroke="#94a3b8" stroke-width="3"/>
            <line x1="337" y1="60" x2="337" y2="100" stroke="#94a3b8" stroke-width="3"/>
            <line x1="562" y1="60" x2="562" y2="100" stroke="#94a3b8" stroke-width="3"/>
            <line x1="788" y1="60" x2="788" y2="100" stroke="#94a3b8" stroke-width="3"/>

            <!-- Arrow heads -->
            <defs>
              <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
              </marker>
            </defs>

            <!-- Apply arrow heads to branch lines -->
            <line x1="112" y1="95" x2="112" y2="100" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrowhead)"/>
            <line x1="337" y1="95" x2="337" y2="100" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrowhead)"/>
            <line x1="562" y1="95" x2="562" y2="100" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrowhead)"/>
            <line x1="788" y1="95" x2="788" y2="100" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrowhead)"/>
          </svg>

          <!-- Lower level modules -->
          <div class="ecosystem-modules-grid">

            <!-- Scholar -->
            <div class="module-card-simple">
              <a href="/scholar/" class="module-card-link">
                <div class="module-icon">
                  <img src="{% static 'images/scitex-scholar-icon.svg' %}" alt="SciTeX Scholar" width="48" height="48">
                </div>
                <h3>SciTeX Scholar</h3>
                <p class="module-tagline">Literature discovery & analysis</p>
              </a>
            </div>

            <!-- Viz -->
            <div class="module-card-simple">
              <a href="/viz/" class="module-card-link">
                <div class="module-icon">
                  <img src="{% static 'images/scitex-viz-icon.svg' %}" alt="SciTeX-Viz" width="48" height="48">
                </div>
                <h3>SciTeX Viz <span class="coming-soon-badge">Coming Soon</span></h3>
                <p class="module-tagline">Publication-quality graphics</p>
              </a>
            </div>

            <!-- Code -->
            <div class="module-card-simple">
              <a href="/code/" class="module-card-link">
                <div class="module-icon">
                  <img src="{% static 'images/scitex-code-icon.svg' %}" alt="SciTeX Code" width="48" height="48">
                </div>
                <h3>SciTeX Code <span class="coming-soon-badge">Coming Soon</span></h3>
                <p class="module-tagline">Data analysis & computing toolbox</p>
              </a>
            </div>

            <!-- Writer -->
            <div class="module-card-simple">
              <a href="/writer/" class="module-card-link">
                <div class="module-icon">
                  <img src="{% static 'images/scitex-writer-icon.svg' %}" alt="SciTeX Writer" width="48" height="48">
                </div>
                <h3>SciTeX Writer</h3>
                <p class="module-tagline">AI-enhanced scientific writing</p>
              </a>
            </div>

        </div>

        <!-- Deployment Options -->
        <div class="ecosystem-deployment-simple">
          <p class="deployment-intro">Deploy on your terms:</p>
          <div class="deployment-options-simple">
            <a href="https://github.com/ywatanabe1989/SciTeX-Cloud" class="deployment-option-link" target="_blank">
              <i class="fas fa-server"></i> Run Locally
            </a>
            <span class="deployment-separator">or</span>
            <a href="{% url 'cloud_app:premium' %}" class="deployment-option-link">
              <i class="fas fa-cloud"></i> Use Cloud
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>
</div>
