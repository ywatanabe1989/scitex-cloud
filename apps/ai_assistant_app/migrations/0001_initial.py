# Generated by Django 4.2.11 on 2025-06-29 13:36

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('scholar_app', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('writer_app', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='AIInteraction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('interaction_type', models.CharField(choices=[('query', 'Research Query'), ('suggestion_request', 'Suggestion Request'), ('analysis_request', 'Analysis Request'), ('writing_help', 'Writing Help'), ('citation_search', 'Citation Search'), ('methodology_advice', 'Methodology Advice'), ('statistical_guidance', 'Statistical Guidance'), ('trend_prediction', 'Trend Prediction')], max_length=30)),
                ('user_prompt', models.TextField(help_text="User's input/question")),
                ('ai_response', models.TextField(help_text="AI's response")),
                ('context_data', models.JSONField(blank=True, default=dict)),
                ('response_metadata', models.JSONField(blank=True, default=dict)),
                ('tokens_used', models.IntegerField(default=0)),
                ('response_time_seconds', models.FloatField(blank=True, null=True)),
                ('cost', models.DecimalField(decimal_places=4, default=0.0, max_digits=6)),
                ('user_rating', models.IntegerField(blank=True, help_text='User rating 1-5', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('user_feedback', models.TextField(blank=True)),
                ('is_helpful', models.BooleanField(blank=True, null=True)),
                ('implemented', models.BooleanField(default=False, help_text='Whether user implemented the suggestion')),
                ('follow_up_needed', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AIModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('model_type', models.CharField(choices=[('openai_gpt4', 'OpenAI GPT-4'), ('openai_gpt35', 'OpenAI GPT-3.5'), ('claude', 'Anthropic Claude'), ('local_llm', 'Local LLM'), ('custom', 'Custom Model')], max_length=20)),
                ('api_endpoint', models.URLField(blank=True)),
                ('api_key_required', models.BooleanField(default=True)),
                ('max_tokens', models.IntegerField(default=4096)),
                ('temperature', models.FloatField(default=0.7, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(2.0)])),
                ('cost_per_1k_tokens', models.DecimalField(decimal_places=4, default=0.002, max_digits=6)),
                ('capabilities', models.JSONField(default=list)),
                ('is_active', models.BooleanField(default=True)),
                ('is_default', models.BooleanField(default=False)),
                ('description', models.TextField(blank=True)),
                ('version', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ResearchProject',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=500)),
                ('description', models.TextField()),
                ('research_field', models.CharField(choices=[('computer_science', 'Computer Science'), ('biology', 'Biology'), ('chemistry', 'Chemistry'), ('physics', 'Physics'), ('medicine', 'Medicine'), ('psychology', 'Psychology'), ('economics', 'Economics'), ('engineering', 'Engineering'), ('mathematics', 'Mathematics'), ('social_sciences', 'Social Sciences'), ('humanities', 'Humanities'), ('interdisciplinary', 'Interdisciplinary')], max_length=30)),
                ('keywords', models.TextField(blank=True, help_text='Comma-separated keywords')),
                ('status', models.CharField(choices=[('planning', 'Planning'), ('literature_review', 'Literature Review'), ('methodology', 'Methodology Design'), ('data_collection', 'Data Collection'), ('analysis', 'Analysis'), ('writing', 'Writing'), ('revision', 'Revision'), ('submitted', 'Submitted'), ('published', 'Published'), ('completed', 'Completed'), ('paused', 'Paused')], default='planning', max_length=20)),
                ('start_date', models.DateField()),
                ('target_completion', models.DateField(blank=True, null=True)),
                ('actual_completion', models.DateField(blank=True, null=True)),
                ('research_questions', models.TextField(blank=True, help_text='Primary research questions')),
                ('hypotheses', models.TextField(blank=True, help_text='Research hypotheses')),
                ('methodology_notes', models.TextField(blank=True)),
                ('ai_sessions_count', models.IntegerField(default=0)),
                ('total_ai_interactions', models.IntegerField(default=0)),
                ('ai_cost_accumulated', models.DecimalField(decimal_places=4, default=0.0, max_digits=10)),
                ('is_public', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('collaborators', models.ManyToManyField(blank=True, related_name='shared_research_projects', to=settings.AUTH_USER_MODEL)),
                ('scholar_papers', models.ManyToManyField(blank=True, related_name='ai_projects', to='scholar_app.searchindex')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='research_projects', to=settings.AUTH_USER_MODEL)),
                ('writer_manuscripts', models.ManyToManyField(blank=True, related_name='ai_projects', to='writer_app.manuscript')),
            ],
            options={
                'ordering': ['-updated_at'],
            },
        ),
        migrations.CreateModel(
            name='WritingAssistance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('assistance_type', models.CharField(choices=[('structure', 'Structure Improvement'), ('clarity', 'Clarity Enhancement'), ('flow', 'Flow and Transitions'), ('tone', 'Tone Adjustment'), ('conciseness', 'Conciseness'), ('argument', 'Argument Strengthening'), ('evidence', 'Evidence Integration'), ('formatting', 'Formatting and Style')], max_length=20)),
                ('original_text', models.TextField()),
                ('target_audience', models.CharField(blank=True, max_length=100)),
                ('target_journal', models.CharField(blank=True, max_length=200)),
                ('suggested_revisions', models.JSONField(blank=True, default=list)),
                ('overall_feedback', models.TextField()),
                ('specific_improvements', models.JSONField(blank=True, default=list)),
                ('tone_suggestions', models.TextField(blank=True)),
                ('style_recommendations', models.TextField(blank=True)),
                ('word_choice_improvements', models.JSONField(blank=True, default=list)),
                ('organization_feedback', models.TextField(blank=True)),
                ('paragraph_suggestions', models.JSONField(blank=True, default=list)),
                ('transition_improvements', models.JSONField(blank=True, default=list)),
                ('citation_suggestions', models.JSONField(blank=True, default=list)),
                ('evidence_strengthening', models.TextField(blank=True)),
                ('suggested_rewrite', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('pending', 'Pending Review'), ('partially_accepted', 'Partially Accepted'), ('fully_accepted', 'Fully Accepted'), ('rejected', 'Rejected'), ('needs_clarification', 'Needs Clarification')], default='pending', max_length=20)),
                ('user_feedback', models.TextField(blank=True)),
                ('accepted_suggestions', models.JSONField(blank=True, default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('manuscript', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='ai_assistance', to='writer_app.manuscript')),
                ('section', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='ai_assistance', to='writer_app.manuscriptsection')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='writing_assistance', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TrendAnalysis',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('trend_type', models.CharField(choices=[('emerging_topics', 'Emerging Research Topics'), ('methodology_trends', 'Methodology Trends'), ('citation_patterns', 'Citation Patterns'), ('collaboration_networks', 'Collaboration Networks'), ('funding_trends', 'Funding Trends'), ('publication_patterns', 'Publication Patterns'), ('interdisciplinary_growth', 'Interdisciplinary Growth')], max_length=30)),
                ('research_field', models.CharField(choices=[('computer_science', 'Computer Science'), ('biology', 'Biology'), ('chemistry', 'Chemistry'), ('physics', 'Physics'), ('medicine', 'Medicine'), ('psychology', 'Psychology'), ('economics', 'Economics'), ('engineering', 'Engineering'), ('mathematics', 'Mathematics'), ('social_sciences', 'Social Sciences'), ('humanities', 'Humanities'), ('interdisciplinary', 'Interdisciplinary')], max_length=30)),
                ('time_period', models.CharField(help_text="e.g., '2020-2024', 'Last 5 years'", max_length=50)),
                ('data_sources', models.JSONField(blank=True, default=list)),
                ('analysis_parameters', models.JSONField(blank=True, default=dict)),
                ('keywords_analyzed', models.TextField(blank=True)),
                ('identified_trends', models.JSONField(blank=True, default=list)),
                ('trend_predictions', models.JSONField(blank=True, default=list)),
                ('statistical_insights', models.JSONField(blank=True, default=dict)),
                ('trend_charts', models.JSONField(blank=True, default=dict)),
                ('network_analysis', models.JSONField(blank=True, default=dict)),
                ('potential_impact', models.TextField(blank=True)),
                ('research_opportunities', models.JSONField(blank=True, default=list)),
                ('collaboration_suggestions', models.JSONField(blank=True, default=list)),
                ('confidence_level', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('data_quality_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('papers_analyzed', models.IntegerField(default=0)),
                ('processing_time_minutes', models.FloatField(blank=True, null=True)),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('actionability_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('user_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='trend_analyses', to='ai_assistant_app.researchproject')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trend_analyses', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StatisticalGuidance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('analysis_type', models.CharField(choices=[('descriptive', 'Descriptive Statistics'), ('inferential', 'Inferential Statistics'), ('regression', 'Regression Analysis'), ('anova', 'ANOVA'), ('time_series', 'Time Series Analysis'), ('machine_learning', 'Machine Learning'), ('bayesian', 'Bayesian Analysis'), ('non_parametric', 'Non-parametric Tests'), ('multivariate', 'Multivariate Analysis')], max_length=20)),
                ('research_question', models.TextField()),
                ('data_description', models.TextField()),
                ('recommended_tests', models.JSONField(blank=True, default=list)),
                ('assumptions_to_check', models.JSONField(blank=True, default=list)),
                ('sample_size_guidance', models.TextField(blank=True)),
                ('effect_size_considerations', models.TextField(blank=True)),
                ('software_recommendations', models.JSONField(blank=True, default=list)),
                ('code_examples', models.JSONField(blank=True, default=dict)),
                ('interpretation_guidance', models.TextField(blank=True)),
                ('reporting_checklist', models.JSONField(blank=True, default=list)),
                ('visualization_suggestions', models.JSONField(blank=True, default=list)),
                ('power_analysis_notes', models.TextField(blank=True)),
                ('potential_confounders', models.JSONField(blank=True, default=list)),
                ('limitation_notes', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('reviewed', 'Reviewed'), ('implemented', 'Implemented'), ('needs_revision', 'Needs Revision')], default='draft', max_length=20)),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('implementation_results', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='statistical_guidance', to='ai_assistant_app.researchproject')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statistical_guidance', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ResearchSuggestion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('suggestion_type', models.CharField(choices=[('research_question', 'Research Question'), ('methodology', 'Methodology'), ('literature_gap', 'Literature Gap'), ('analysis_approach', 'Analysis Approach'), ('writing_improvement', 'Writing Improvement'), ('citation_recommendation', 'Citation Recommendation'), ('trend_insight', 'Trend Insight'), ('collaboration_opportunity', 'Collaboration Opportunity')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('reasoning', models.TextField(blank=True, help_text="AI's reasoning for this suggestion")),
                ('confidence_level', models.CharField(choices=[('low', 'Low Confidence'), ('medium', 'Medium Confidence'), ('high', 'High Confidence'), ('very_high', 'Very High Confidence')], max_length=10)),
                ('priority_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('supporting_evidence', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('pending', 'Pending Review'), ('accepted', 'Accepted'), ('rejected', 'Rejected'), ('implemented', 'Implemented'), ('deferred', 'Deferred')], default='pending', max_length=20)),
                ('user_notes', models.TextField(blank=True)),
                ('implementation_date', models.DateTimeField(blank=True, null=True)),
                ('tags', models.CharField(blank=True, help_text='Comma-separated tags', max_length=500)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='suggestions', to='ai_assistant_app.researchproject')),
                ('related_papers', models.ManyToManyField(blank=True, to='scholar_app.searchindex')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='research_suggestions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-priority_score', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PersonalizedRecommendation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('recommendation_type', models.CharField(choices=[('paper_suggestion', 'Paper Suggestion'), ('collaboration_opportunity', 'Collaboration Opportunity'), ('methodology_suggestion', 'Methodology Suggestion'), ('tool_recommendation', 'Tool Recommendation'), ('conference_suggestion', 'Conference Suggestion'), ('journal_recommendation', 'Journal Recommendation'), ('skill_development', 'Skill Development'), ('research_direction', 'Research Direction')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('reasoning', models.TextField(help_text='Why this is recommended for the user')),
                ('user_interests', models.JSONField(blank=True, default=list)),
                ('behavioral_patterns', models.JSONField(blank=True, default=dict)),
                ('research_history', models.JSONField(blank=True, default=dict)),
                ('recommended_items', models.JSONField(blank=True, default=list)),
                ('action_items', models.JSONField(blank=True, default=list)),
                ('resources', models.JSONField(blank=True, default=list)),
                ('relevance_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('novelty_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('feasibility_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('viewed', models.BooleanField(default=False)),
                ('clicked', models.BooleanField(default=False)),
                ('dismissed', models.BooleanField(default=False)),
                ('saved', models.BooleanField(default=False)),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('user_feedback', models.TextField(blank=True)),
                ('priority_level', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent')], default='medium', max_length=10)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('viewed_at', models.DateTimeField(blank=True, null=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='personalized_recommendations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-relevance_score', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MethodologyRecommendation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=200)),
                ('category', models.CharField(choices=[('quantitative', 'Quantitative Research'), ('qualitative', 'Qualitative Research'), ('mixed_methods', 'Mixed Methods'), ('experimental', 'Experimental Design'), ('observational', 'Observational Study'), ('computational', 'Computational Methods'), ('theoretical', 'Theoretical Framework')], max_length=20)),
                ('description', models.TextField()),
                ('detailed_steps', models.JSONField(blank=True, default=list)),
                ('research_context', models.TextField(help_text='Research context considered')),
                ('rationale', models.TextField(help_text='Why this methodology is recommended')),
                ('assumptions', models.JSONField(blank=True, default=list)),
                ('required_resources', models.JSONField(blank=True, default=list)),
                ('estimated_timeline', models.CharField(blank=True, max_length=100)),
                ('difficulty_level', models.CharField(choices=[('beginner', 'Beginner'), ('intermediate', 'Intermediate'), ('advanced', 'Advanced'), ('expert', 'Expert')], default='intermediate', max_length=20)),
                ('statistical_considerations', models.TextField(blank=True)),
                ('potential_limitations', models.JSONField(blank=True, default=list)),
                ('validation_approaches', models.JSONField(blank=True, default=list)),
                ('example_studies', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('reviewed', 'Reviewed'), ('accepted', 'Accepted'), ('implemented', 'Implemented'), ('rejected', 'Rejected')], default='draft', max_length=20)),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('implementation_notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='methodology_recommendations', to='ai_assistant_app.researchproject')),
                ('supporting_literature', models.ManyToManyField(blank=True, to='scholar_app.searchindex')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='methodology_recommendations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LiteratureAnalysis',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('analysis_type', models.CharField(choices=[('gap_analysis', 'Literature Gap Analysis'), ('trend_analysis', 'Research Trend Analysis'), ('citation_network', 'Citation Network Analysis'), ('methodology_comparison', 'Methodology Comparison'), ('thematic_analysis', 'Thematic Analysis'), ('quality_assessment', 'Quality Assessment')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('search_query', models.TextField(blank=True, help_text='Original search query')),
                ('analysis_parameters', models.JSONField(blank=True, default=dict)),
                ('key_findings', models.JSONField(blank=True, default=list)),
                ('identified_gaps', models.JSONField(blank=True, default=list)),
                ('research_trends', models.JSONField(blank=True, default=list)),
                ('methodology_insights', models.JSONField(blank=True, default=dict)),
                ('summary_report', models.TextField(blank=True)),
                ('visualization_data', models.JSONField(blank=True, default=dict)),
                ('papers_analyzed', models.IntegerField(default=0)),
                ('confidence_score', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('processing_time_seconds', models.FloatField(blank=True, null=True)),
                ('status', models.CharField(choices=[('processing', 'Processing'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled')], default='processing', max_length=20)),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('user_feedback', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('analyzed_papers', models.ManyToManyField(related_name='ai_analyses', to='scholar_app.searchindex')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='literature_analyses', to='ai_assistant_app.researchproject')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='literature_analyses', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CitationSuggestion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('suggestion_type', models.CharField(choices=[('missing_reference', 'Missing Reference'), ('supporting_evidence', 'Supporting Evidence'), ('contrasting_view', 'Contrasting View'), ('methodology_reference', 'Methodology Reference'), ('recent_development', 'Recent Development'), ('foundational_work', 'Foundational Work'), ('similar_study', 'Similar Study')], max_length=30)),
                ('text_context', models.TextField(help_text='Text where citation should be added')),
                ('position_in_text', models.IntegerField(blank=True, null=True)),
                ('relevance_explanation', models.TextField()),
                ('suggested_citation_text', models.TextField(blank=True)),
                ('citation_style', models.CharField(default='apa', max_length=20)),
                ('confidence_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('relevance_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('novelty_score', models.FloatField(default=0.5, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('status', models.CharField(choices=[('pending', 'Pending Review'), ('accepted', 'Accepted'), ('rejected', 'Rejected'), ('modified', 'Modified'), ('already_cited', 'Already Cited')], default='pending', max_length=20)),
                ('user_notes', models.TextField(blank=True)),
                ('implemented_citation', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('ai_interaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aiinteraction')),
                ('manuscript', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='citation_suggestions', to='writer_app.manuscript')),
                ('section', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='citation_suggestions', to='writer_app.manuscriptsection')),
                ('suggested_paper', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='citation_suggestions', to='scholar_app.searchindex')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='citation_suggestions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-relevance_score', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AISession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('session_type', models.CharField(choices=[('research_planning', 'Research Planning'), ('literature_analysis', 'Literature Analysis'), ('methodology_design', 'Methodology Design'), ('data_analysis_guidance', 'Data Analysis Guidance'), ('writing_assistance', 'Writing Assistance'), ('citation_suggestion', 'Citation Suggestion'), ('trend_analysis', 'Trend Analysis'), ('general_consultation', 'General Consultation')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('context', models.TextField(blank=True, help_text='Research context provided to AI')),
                ('total_interactions', models.IntegerField(default=0)),
                ('total_tokens_used', models.IntegerField(default=0)),
                ('total_cost', models.DecimalField(decimal_places=4, default=0.0, max_digits=8)),
                ('session_duration', models.DurationField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('ended_at', models.DateTimeField(blank=True, null=True)),
                ('last_activity', models.DateTimeField(auto_now=True)),
                ('ai_model', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='ai_assistant_app.aimodel')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='ai_sessions', to='ai_assistant_app.researchproject')),
                ('scholar_papers_referenced', models.ManyToManyField(blank=True, to='scholar_app.searchindex')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ai_sessions', to=settings.AUTH_USER_MODEL)),
                ('writer_sections_assisted', models.ManyToManyField(blank=True, to='writer_app.manuscriptsection')),
            ],
            options={
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='AIModelConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('default_temperature', models.FloatField(default=0.7, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(2.0)])),
                ('default_max_tokens', models.IntegerField(default=2048)),
                ('response_style', models.CharField(choices=[('concise', 'Concise'), ('detailed', 'Detailed'), ('academic', 'Academic'), ('conversational', 'Conversational')], default='academic', max_length=20)),
                ('openai_api_key', models.CharField(blank=True, help_text='Encrypted OpenAI API key', max_length=500)),
                ('claude_api_key', models.CharField(blank=True, help_text='Encrypted Claude API key', max_length=500)),
                ('daily_token_limit', models.IntegerField(default=50000)),
                ('monthly_cost_limit', models.DecimalField(decimal_places=2, default=100.0, max_digits=8)),
                ('notify_on_suggestions', models.BooleanField(default=True)),
                ('notify_on_analysis_completion', models.BooleanField(default=True)),
                ('email_summaries', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('backup_model', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='backup_for_users', to='ai_assistant_app.aimodel')),
                ('preferred_model', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='preferred_by_users', to='ai_assistant_app.aimodel')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='ai_config', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddField(
            model_name='aiinteraction',
            name='session',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='interactions', to='ai_assistant_app.aisession'),
        ),
        migrations.CreateModel(
            name='AIUsageStatistics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_sessions', models.IntegerField(default=0)),
                ('total_interactions', models.IntegerField(default=0)),
                ('total_tokens_used', models.BigIntegerField(default=0)),
                ('total_cost', models.DecimalField(decimal_places=4, default=0.0, max_digits=10)),
                ('research_suggestions_generated', models.IntegerField(default=0)),
                ('literature_analyses_performed', models.IntegerField(default=0)),
                ('methodology_recommendations_given', models.IntegerField(default=0)),
                ('writing_assistance_sessions', models.IntegerField(default=0)),
                ('citation_suggestions_made', models.IntegerField(default=0)),
                ('trend_analyses_performed', models.IntegerField(default=0)),
                ('average_user_rating', models.FloatField(blank=True, null=True)),
                ('total_positive_feedback', models.IntegerField(default=0)),
                ('total_negative_feedback', models.IntegerField(default=0)),
                ('suggestions_implemented', models.IntegerField(default=0)),
                ('date', models.DateField()),
                ('month', models.CharField(max_length=7)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ai_usage_stats', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-date'],
                'unique_together': {('user', 'date')},
            },
        ),
    ]
