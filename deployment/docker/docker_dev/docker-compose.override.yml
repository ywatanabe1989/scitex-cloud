# ============================================
# Docker Compose Override - Development Only
# ============================================
# Auto-loaded when running `docker compose` commands in dev
# Provides dev-specific overrides without modifying main docker-compose.yml

version: '3.8'

services:
  # ============================================
  # Web Service - Development Overrides
  # ============================================
  web:
    # Development environment variables
    environment:
      - DEBUG=True
      - DJANGO_DEBUG=True
      - PYTHONUNBUFFERED=1
      - WATCHFILES_FORCE_POLLING=true  # For NFS/network filesystems
    
    # Expose debugger port for remote debugging
    ports:
      - "5678:5678"  # debugpy/pdb port
    
    # Override command for development (if needed)
    # command: ["python", "manage.py", "runserver", "0.0.0.0:8000"]

  # ============================================
  # Database - Development Overrides
  # ============================================
  db:
    # Enable query logging in development
    command: 
      - postgres
      - -c
      - log_statement=all
      - -c
      - log_destination=stderr
      - -c
      - logging_collector=off

  # ============================================
  # Redis - Development Overrides  
  # ============================================
  redis:
    # More verbose logging in development
    command: redis-server --appendonly yes --loglevel debug

  # ============================================
  # Gitea - Development Overrides
  # ============================================
  gitea:
    # Additional dev-specific environment
    environment:
      - GITEA__log__LEVEL=Debug

# EOF
