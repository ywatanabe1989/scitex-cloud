[uwsgi]
# Django project settings - PRODUCTION
chdir = /var/www/scitex-cloud
module = config.wsgi:application
home = /var/www/scitex-cloud/venv
env = DJANGO_SETTINGS_MODULE=config.settings.settings_prod

# Process management (Production - more workers)
master = true
processes = 8
threads = 4
max-requests = 5000
harakiri = 60
max-worker-lifetime = 3600

# Socket configuration
socket = /run/scitex_cloud.sock
chmod-socket = 666
vacuum = true

# Logging
logto = /var/log/uwsgi/scitex_cloud.log
log-maxsize = 50000000
log-backupname = /var/log/uwsgi/scitex_cloud.log.old

# Performance
enable-threads = true
lazy-apps = true
single-interpreter = true
buffer-size = 32768

# Static files (handled by Nginx in production)
static-map = /static=/var/www/scitex-cloud/staticfiles
static-map = /media=/var/www/scitex-cloud/media

# User/Group
uid = www-data
gid = www-data

# Production optimizations
cheaper = 2
cheaper-initial = 4
cheaper-step = 1
cheaper-algo = spare

# Misc
die-on-term = true
need-app = true
