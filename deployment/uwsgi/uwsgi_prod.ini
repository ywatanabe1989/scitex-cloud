[uwsgi]
# Django project settings - PRODUCTION
chdir = /home/ywatanabe/proj/scitex-cloud
module = config.wsgi:application
home = /home/ywatanabe/proj/scitex-cloud/.venv
env = DJANGO_SETTINGS_MODULE=config.settings.settings_prod

# Process management (Production - optimized for 6 CPU cores)
master = true
processes = 12
threads = 2
max-requests = 5000
harakiri = 60
max-worker-lifetime = 3600

# Socket configuration
socket = /home/ywatanabe/proj/scitex-cloud/run/scitex_cloud.sock
chmod-socket = 666
vacuum = true

# Logging
logto = /var/log/uwsgi/scitex_cloud.log
log-maxsize = 50000000
log-backupname = /var/log/uwsgi/scitex_cloud.log.old

# Performance
enable-threads = true
lazy-apps = true
single-interpreter = true
buffer-size = 32768

# Static files (handled by Nginx in production)
static-map = /static=/home/ywatanabe/proj/scitex-cloud/staticfiles
static-map = /media=/home/ywatanabe/proj/scitex-cloud/media

# User/Group
uid = www-data
gid = www-data

# Production optimizations (for 6 CPU cores)
cheaper = 2
cheaper-initial = 6
cheaper-step = 2
cheaper-algo = spare

# Misc
die-on-term = true
need-app = true
